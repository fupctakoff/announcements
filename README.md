# Demo-API проекта объявлений
# О проекте
<br>
Стек: Python, FastAPI,  PostgreSQL, SQLAlchemy, Pydantic, Alembic, Docker, fastapi-users

# Установка
<br>

### 1) Клонировать репозиторий с проектом

    git clone git@github.com:fupctakoff/announcements.git

### 2) Изменить настройки подключения к базе данных, поменяв значения переменных в файле .env в корне проекта. .env.example доступен также в корне проекта


### Предупреждение: сразу после запуска проекта необходимо воспользоваться эндпоином /create_role:
Первый раз значение name указать: user
<br>
Второй раз значение name указать: admin


# Запуск

### 1) Запуск проекта
  
  docker compose up

#### Примечание

Проект доступен на порту 8000. Исполняемый файл находится: src/main.py. При запуске бд должны быть пуста

#### Ссылка на документацию swagger: <br> http://127.0.0.1:8000/docs 

<br>


Эндпоинты:<br>
/create_role - создание роли: user, admin - обязательный первый шаг<br>
/auth/login - аутентификация: username - это email пользователя<br>
/auth/logout - выход<br>
/auth/register - регистрация. По умолчанию регистрируется пользователь с привилегиями user<br>
/set_admin - доступно для администраторов. Позволяет наделить выбранного пользователя правами администратором<br>

/announcement/create_announcement_type - создание типа объявления - неободимый шаг для последующих публикаций объявлений <br>
/announcement/create_announcement - создание объявления <br>
/announcement/announcement_list - вывод всех объявлений <br>

/comment/create_comment - создание комментария - доступно аутентифицированным пользователям <br>
/comment/delete_comment - удаление комментария - доступно создателю комментария и администраторам<br>
/comment/list_comments - вывод списка комментариев к объявлению<br>

#### Комментарий: неудобства использования проекта, а именно, hard-code создание Ролей пользователей, а также все сопутствующие моменты в коде будут исправлены в одном из следующих пушей. Это обусловлено нехваткой времени.